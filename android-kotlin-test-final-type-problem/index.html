<!doctype html><html lang=en-us><head><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Android Kotlin Test - Final Type Problem &#183;</title><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://yazilim.aykutasil.com/favicon.ico><link rel=canonical href=https://yazilim.aykutasil.com/android-kotlin-test-final-type-problem/><meta name=description content="Android Kotlin ile test yazarken karşılaşılan final type problemi ve çözümü"><meta name=twitter:card content="summary"><meta name=twitter:title content="Android Kotlin Test - Final Type Problem"><meta name=twitter:description content="Android Kotlin ile test yazarken karşılaşılan final type problemi ve çözümü"><meta name=twitter:url content="https://yazilim.aykutasil.com/android-kotlin-test-final-type-problem"><meta name=twitter:site content="@aykuttasil"><meta property="og:site_name" content><meta property="og:title" content="Android Kotlin Test - Final Type Problem &#183; aykuttasil"><meta property="og:url" content="https://yazilim.aykutasil.com/android-kotlin-test-final-type-problem/"><meta property="article:publisher" content="https://www.facebook.com/aykuttasil"><meta property="og:type" content="article"><meta property="og:description" content="Android Kotlin ile test yazarken karşılaşılan final type problemi ve çözümü"><meta property="article:published_time" content="2019-01-29T15:38:29+03:00"><meta property="article:tag" content="android"><meta property="article:tag" content="kotlin"><meta property="article:tag" content="test"><meta property="og:image" content="https://yazilim.aykutasil.com/img/istanbul_marti.jpg"><meta name=generator content="Hugo 0.69.2"><link rel=stylesheet type=text/css href=https://yazilim.aykutasil.com/built/screen.css><link rel=stylesheet type=text/css href=https://yazilim.aykutasil.com/css/casper-two.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css></head><body class=post-template><div class=site-wrapper><header class="site-header outer"><div class=inner><nav class=site-nav><div class=site-nav-left><a class=site-nav-logo href=#><img src=https://yazilim.aykutasil.com/img/aykutasil.jpg alt=aykuttasil></a><ul class=nav role=menu><li role=menuitem><a href=/about/>About me</a></li><li role=menuitem><a href=/>Home</a></li><li role=menuitem><a href=/tags/android/>Android</a></li><li role=menuitem><a href=/tags/flutter/>Flutter</a></li><li role=menuitem><a href=/categories/>Categories</a></li></ul></div><div class=site-nav-right><div class=social-links><a class="social-link social-link-fb" href=https://www.facebook.com/aykuttasil target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86.0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg></a><a class="social-link social-link-tw" href=https://twitter.com/aykuttasil target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088.0 01-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015.0 01-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25.0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688.0 5.063-.875 7.188-2.5-1.25.0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5.0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673.0 01-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228.0 01-1.875-2c-.5-.875-.688-1.813-.688-2.75.0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579.0 011.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48.0 003.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a><a class=social-link href=https://github.com/aykuttasil target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class=social-link href=https://www.linkedin.com/in/aykuttasil target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 50 512 512"><path d="M150.65 100.682c0 27.992-22.508 50.683-50.273 50.683-27.765.0-50.273-22.691-50.273-50.683C50.104 72.691 72.612 50 100.377 50 128.143 50 150.65 72.691 150.65 100.682zM143.294 187.333H58.277V462h85.017V187.333zM279.195 187.333h-81.541V462h81.541s0-101.877.0-144.181c0-38.624 17.779-61.615 51.807-61.615 31.268.0 46.289 22.071 46.289 61.615.0 39.545.0 144.181.0 144.181h84.605s0-100.344.0-173.915-41.689-109.131-99.934-109.131-82.768 45.369-82.768 45.369V187.333z" /></svg></a><a class=social-link href=https://medium.com/@aykuttasil target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 195 195"><path d="M46.5340803 65.2157554C46.6968378 63.6076572 46.0836 62.018231 44.8828198 60.93592L32.6512605 46.2010582V44H70.6302521L99.9859944 108.380952 125.794585 44H162V46.2010582L151.542017 56.2281011C150.640424 56.9153477 150.193188 58.0448862 150.380019 59.1628454V132.837155C150.193188 133.955114 150.640424 135.084652 151.542017 135.771899L161.755369 145.798942V148H110.38282V145.798942L120.963119 135.527337C122.002801 134.487948 122.002801 134.182246 122.002801 132.592593V73.0417402L92.585901 147.755438H88.6106443L54.3622782 73.0417402V123.115814C54.0767278 125.221069 54.7759199 127.3406 56.2581699 128.863022L70.0186741 145.55438V147.755438H31V145.55438L44.7605042 128.863022C46.2319621 127.338076 46.8903838 125.204485 46.5340803 123.115814V65.2157554z"/></svg></a></div></div></nav></div></header><main id=site-main class="site-main outer" role=main><div class=inner><article class="post-full post"><header class=post-full-header><section class=post-full-meta><time class=post-full-meta-date datetime=2019-01-29>29 January 2019</time>
<span class=date-divider>/</span> <a href=https://yazilim.aykutasil.com/tags/android/>#android</a>&nbsp;<a href=https://yazilim.aykutasil.com/tags/kotlin/>#kotlin</a>&nbsp;</section><h1 class=post-full-title>Android Kotlin Test - Final Type Problem</h1></header><figure class=post-full-image style=background-image:url(https://yazilim.aykutasil.com/defimg/2.jpg)></figure><section class=post-full-content><div class=kg-card-markdown><h2 id=sorun>Sorun</h2><p><strong>Kotlin</strong> dili ile geliştirilen <strong>Android</strong> projelerinin test yazımı sırasında sınıfların veya metodların <strong>mock</strong>lanması, <strong>Java</strong> ile geliştirilen projelere göre bazı farklılıklar göstermektedir. Bu farklılığın sebeplerinden biri <strong>Kotlin</strong> ile oluşturulan sınıf veya metodların default olarak <strong>final</strong> olarak işaretlenmiş olmasıdır. Ve <strong>final</strong> tipindeki sınıfların <strong>mock</strong>lanması bazı sorunlar çıkarmaktadır.</p><h2 id=çözüm>Çözüm</h2><p><strong>Final</strong> tipindeki sınıfların veya metodların mocklama işlemi sırasında çıkan sorunu çözmenin birkaç farklı yöntemi vardır.</p><h2 id=çözüm-1-open-classname>Çözüm 1 (open ClassName)</h2><p>Test edeceğimiz sınıf ve metodun başına <strong>open</strong> ifadesini ekleyerek <strong>extend</strong> edilebilir hale getirmek. Böylece <strong>mock</strong> kütüphaneleri kotlin final problemine yakalanmadan mocklama işlemini başarıyla gerçekleştirebilecekler.</p><h2 id=çözüm-2-all-open>Çözüm 2 (all-open)</h2><p>Kotlin <strong>all-open</strong> pluginini kullanmak. Ki bu <strong>plugin</strong>&lsquo;de aslında sınıfların, metodların başında <strong>open</strong> ifadesi ekliyor.</p><h2 id=çözüm-3-mockk>Çözüm 3 (Mockk)</h2><p><a href=https://mockk.io/>Mockk</a> kütüphanesini kullanmak.</p><blockquote><p><strong>Not:</strong> Eğer test sınıfımızı <strong>Instrumentation Test</strong> bağlamında yani <strong>androidTest</strong> package&rsquo;ı altında yazıyorsak testi çalıştıracağımız emulator veya cihazın android versiyonuna göre bazı farklılıklar vardır.</p></blockquote><blockquote><ul><li>Android P ve sonrası (>= 28) için birşey yapmanıza gerek yok</li><li>Android P öncesi (&lt; 28) için <strong>all-open</strong> pluginini aktifleştirmeniz gerekmektedir.</li><li><a href=https://mockk.io/ANDROID>https://mockk.io/ANDROID</a></li></ul></blockquote><p><strong>Not:</strong> Kişisel olarak <strong>Mockk</strong> kullanmanızı tavsiye ederim.</p><h2 id=çözüm-4-mockito>Çözüm 4 (Mockito)</h2><p><a href=https://site.mockito.org/>Mockito</a> kütüphanesini kullanmak.</p><h3 id=unit-test-için><strong>Unit Test için</strong></h3><ul><li>Mockito kütüphanesini eklerken <strong>mockito-core</strong> yerine <strong>mockito-inline</strong> bağımlılığını kullanmalısınız.</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>// testImplementation <span style=color:#e6db74>&#34;org.mockito:mockito-core:2.23.16&#34;</span>
testImplementation <span style=color:#e6db74>&#34;org.mockito:mockito-inline:2.23.16&#34;</span>
</code></pre></div><p>Aslında <strong>mockito-inline</strong> bağımlılığının yaptığı <strong>resources/mockito-extensions/org.mockito.plugins.MockMaker</strong> dosyasına <strong>mock-maker-inline</strong> satırını eklemek.</p><ul><li><a href=https://github.com/mockito/mockito/blob/release%2F2.x/subprojects/inline/src/main/resources/mockito-extensions/org.mockito.plugins.MockMaker>https://github.com/mockito/mockito/blob/release%2F2.x/subprojects/inline/src/main/resources/mockito-extensions/org.mockito.plugins.MockMaker</a></li></ul><blockquote><p><strong>mockito-inline</strong> ile <strong>java byte code</strong> manipilasyonu sağlanır. Bu sayede <strong>final</strong> tanımlanmış sınıf veya metodlar mocklanabilir hale gelir. Yazdığımız <strong>Unit Test</strong>ler <strong>JVM</strong>&lsquo;de çalışacağı için bu yöntem işe yarar.
Fakat <strong>Android runtime</strong>&lsquo;ı <strong>Dalvik Byte Code</strong> kullanır. Ve bu yüzden <strong>mockito-inline</strong> yöntemi işe yaramaz.</p></blockquote><h3 id=instrumentation-test-için><strong>Instrumentation Test için</strong></h3><ul><li><code>androidTestImplementation "org.mockito:mockito-android:2.23.16"</code> bağımlılığını eklemelisiniz.</li><li><a href=https://github.com/mockito/mockito/issues/1082#issuecomment-301646307>Buradaki</a> yöntemlerden birini izleyebilirsiniz. Aslında burada bahsedilen yöntem de <strong>all-open</strong> pluginini aktifleştirmekten ibaret.</li><li><a href=https://medium.com/androiddevelopers/mock-final-and-static-methods-on-android-devices-b383da1363ad>https://medium.com/androiddevelopers/mock-final-and-static-methods-on-android-devices-b383da1363ad</a></li></ul><blockquote><p><strong>Not</strong>: <strong>dexmaker-mockito</strong>&lsquo;nun çalışması için <strong>Android P</strong> ve sonrası gerekmektedir. Aşağıdaki tabloda görebilirsiniz.</p></blockquote><p>Eğer projenizi <strong>kotlin</strong> ile geliştirmiş ve test için <strong>Mockito</strong> kullanmaya karar vermişseniz <a href=https://github.com/nhaarman/mockito-kotlin>Mockito Kotlin</a> kütüphanesini kullanmanızda fayda var. Bu kütüphaneyi kullanarak daha hızlı ve kolay şekilde Mockito&rsquo;yu kullanabilir ve bazı kotlin özelliklerinden dolayı alınacabilecek hataları (Kotlin NullPointerException hatası) engelleyebilirsiniz.</p><hr><p><img src=/img/mockito_benchmark.png alt="Mockito Benchmark" title="Mockito Benchmark"></p><h1 id=kaynaklar>Kaynaklar</h1><ul><li><a href=https://medium.com/androiddevelopers/mock-final-and-static-methods-on-android-devices-b383da1363ad>https://medium.com/androiddevelopers/mock-final-and-static-methods-on-android-devices-b383da1363ad</a></li></ul></div></section><footer class=post-full-footer><section class=author-card><img class=author-profile-image src=https://yazilim.aykutasil.com/img/aykutasil.jpg alt=Author><section class=author-card-content><h4 class=author-card-name><a href=https://yazilim.aykutasil.com/>Aykut Asil</a></h4><p>Software Developer</p></section></section></footer></article><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https:\/\/yazilim.aykutasil.com\/android-kotlin-test-final-type-problem\/";this.page.identifier="https:\/\/yazilim.aykutasil.com\/android-kotlin-test-final-type-problem\/";};(function(){var d=document,s=d.createElement('script');s.src='https://yazilimaykutasil.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main><aside class="read-next outer"><div class=inner><div class=read-next-feed><article class=read-next-card style=background-image:url(https://yazilim.aykutasil.com/img/istanbul_marti.jpg)><header class=read-next-card-header><small class=read-next-card-header-sitetitle>&mdash; aykuttasil &mdash;</small><h3 class=read-next-card-header-title><a href=https://yazilim.aykutasil.com/tags/android/>#android</a></h3></header><div class=read-next-divider><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg></div><div class=read-next-card-content><ul><li><a href=https://yazilim.aykutasil.com/aspnetcore-run-middleware/>ASP.Net Core app.Run() Middleware</a></li><li><a href=https://yazilim.aykutasil.com/android-architecture-components/>Android Architecture Components</a></li><li><a href=https://yazilim.aykutasil.com/create-json-with-kotlin-dsl/>Kotlin DSL ile Json</a></li><li><a href=https://yazilim.aykutasil.com/arduino_hc06_kullanimi/>Arduino HC-06 Bluetooth Kullanımı</a></li></ul></div><footer class=read-next-card-footer><a href=https://yazilim.aykutasil.com/tags/android/>See all related posts →</a></footer></article><article class="post-card post"><a class=post-card-image-link href=https://yazilim.aykutasil.com/android-service/><div class=post-card-image style=background-image:url(https://yazilim.aykutasil.com/defimg/3.jpg)></div></a><div class=post-card-content><a class=post-card-content-link href=https://yazilim.aykutasil.com/android-service/><header class=post-card-header><span class=post-card-tags>#android
#service</span><h2 class=post-card-title>Android Service</h2></header><section class=post-card-excerpt><p><p>Android Service Nedir? Nasıl Kullanılır?</p><p>Android&rsquo;in temel bileşenlerinden biri olan Service&rsquo;ler kısaca UI(arayüz) olmayan Activity&rsquo;lere benzetebiliriz.</p></p></section></a><footer class=post-card-meta><img class=author-profile-image src=https://yazilim.aykutasil.com/img/aykutasil.jpg alt=Author>
<span class=post-card-author><a href=/>Aykut Asil</a></span></footer></div></article><article class="post-card post"><a class=post-card-image-link href=https://yazilim.aykutasil.com/server-ip/><div class=post-card-image style=background-image:url(https://yazilim.aykutasil.com/defimg/3.jpg)></div></a><div class=post-card-content><a class=post-card-content-link href=https://yazilim.aykutasil.com/server-ip/><header class=post-card-header><span class=post-card-tags>#ip</span><h2 class=post-card-title>Server Ip</h2></header><section class=post-card-excerpt><p>Find Server IP</p></section></a><footer class=post-card-meta><img class=author-profile-image src=https://yazilim.aykutasil.com/img/aykutasil.jpg alt=Author>
<span class=post-card-author><a href=/>Aykut Asil</a></span></footer></div></article></div></div></aside><div class=floating-header><div class=floating-header-logo><a href=https://yazilim.aykutasil.com/><img src=https://yazilim.aykutasil.com/img/aykutasil.jpg alt>
<span></span></a></div><span class=floating-header-divider>&mdash;</span><div class=floating-header-title>Android Kotlin Test - Final Type Problem</div><div class=floating-header-share><div class=floating-header-share-label>Share this<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 15.5V4a1.5 1.5.0 113 0v4.5h2a1 1 0 011 1h2a1 1 0 011 1H18a1.5 1.5.0 011.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2.0 011.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg></div><a class=floating-header-share-tw href="https://twitter.com/share?text=Android%20Kotlin%20Test%20-%20Final%20Type%20Problem&url=https%3a%2f%2fyazilim.aykutasil.com%2fandroid-kotlin-test-final-type-problem%2f" onclick="window.open(this.href,'share-twitter','width=550,height=235');return false;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088.0 01-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015.0 01-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25.0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688.0 5.063-.875 7.188-2.5-1.25.0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5.0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673.0 01-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228.0 01-1.875-2c-.5-.875-.688-1.813-.688-2.75.0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579.0 011.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48.0 003.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a><a class=floating-header-share-fb href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fyazilim.aykutasil.com%2fandroid-kotlin-test-final-type-problem%2f" onclick="window.open(this.href,'share-facebook','width=580,height=296');return false;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86.0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg></a></div><progress class=progress value=0><div class=progress-container><span class=progress-bar></span></div></progress></div><footer class="site-footer outer"><div class="site-footer-content inner"><section class=copyright style=line-height:1.3em><a href=/>aykuttasil</a> © 2020<br><span style=font-size:.8em;color:#555>Hugo port of <a href=https://github.com/TryGhost/Casper>Casper 2.1.7</a> by <a href=https://www.telematika.org>EM</a></span></section><nav class=site-footer-nav><a href=/>Latest Posts</a>
<a href=https://www.facebook.com/aykuttasil target=_blank rel=noopener>Facebook</a>
<a href=https://twitter.com/aykuttasil target=_blank rel=noopener>Twitter</a>
<a href=https://github.com/aykuttasil target=_blank rel=noopener>Github</a>
<a href=https://www.linkedin.com/in/aykuttasil target=_blank rel=noopener>LinkedIn</a>
<a href=https://medium.com/@aykuttasil target=_blank rel=noopener>Medium</a></nav></div></footer></div><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script type=text/javascript src=//code.jquery.com/jquery-3.2.1.min.js></script><script type=text/javascript src=https://yazilim.aykutasil.com/js/jquery.fitvids.js></script><script>hljs.initHighlightingOnLoad();</script><script>var _gaq=[['_setAccount','UA-42457939-6'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'));</script><script>$(document).ready(function(){var $postContent=$(".post-full-content");$postContent.fitVids();var progressBar=document.querySelector('progress');var header=document.querySelector('.floating-header');var title=document.querySelector('.post-full-title');var lastScrollY=window.scrollY;var lastWindowHeight=window.innerHeight;var lastDocumentHeight=$(document).height();var ticking=false;function onScroll(){lastScrollY=window.scrollY;requestTick();}
function onResize(){lastWindowHeight=window.innerHeight;lastDocumentHeight=$(document).height();requestTick();}
function requestTick(){if(!ticking){requestAnimationFrame(update);}
ticking=true;}
function update(){var trigger=title.getBoundingClientRect().top+window.scrollY;var triggerOffset=title.offsetHeight+35;var progressMax=lastDocumentHeight-lastWindowHeight;if(lastScrollY>=trigger+triggerOffset){header.classList.add('floating-active');}else{header.classList.remove('floating-active');}
progressBar.setAttribute('max',progressMax);progressBar.setAttribute('value',lastScrollY);ticking=false;}
window.addEventListener('scroll',onScroll,{passive:true});window.addEventListener('resize',onResize,false);update();});</script></body></html>