<!DOCTYPE html>
<html lang="en-US" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Foreground Service ile FusedLocationApi Kullanımı &middot; </title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://yazilim.aykutasil.com/favicon.ico" />
    <link rel="canonical" href="https://yazilim.aykutasil.com/post/foreground-service-ile-fusedlocationapi-kullan%C4%B1m%C4%B1/" />

     <meta name="description" content="Android service yapısı, Android’in temel bileşenlerinden olup genel kullanım amacı yan iş parçacığı oluşturmaktır. Uzun süren işlemler (download vb.) için olmaz" /> 

     
    
    <meta name="twitter:card" content="summary"/>
    
 
    <meta name="twitter:title" content="Foreground Service ile FusedLocationApi Kullanımı"/>
    <meta name="twitter:description" content="Android service yapısı, Android’in temel bileşenlerinden olup genel kullanım amacı yan iş parçacığı oluşturmaktır. Uzun süren işlemler (download vb.) için olmaz"/>
    <meta name="twitter:url" content="https://yazilim.aykutasil.com/post/foreground-service-ile-fusedlocationapi-kullan%C4%B1m%C4%B1/" />
    <meta name="twitter:site" content="@aykuttasil"/>

    <meta property="og:site_name" content="" />
    <meta property="og:title" content="Foreground Service ile FusedLocationApi Kullanımı &middot; My Book" />
    <meta property="og:url" content="https://yazilim.aykutasil.com/post/foreground-service-ile-fusedlocationapi-kullan%C4%B1m%C4%B1/" />
    <meta property="article:publisher" content="https://www.facebook.com/aykuttasil" />

    <meta property="og:type" content="article" />
    <meta property="og:description" content="Android service yapısı, Android’in temel bileşenlerinden olup genel kullanım amacı yan iş parçacığı oluşturmaktır. Uzun süren işlemler (download vb.) için olmaz" />

    <meta property="article:published_time" content="2017-01-11T15:27:59&#43;03:00" />
    <meta property="article:tag" content="software" /><meta property="article:tag" content="android" /><meta property="article:tag" content="java" /><meta property="article:tag" content="fusedlocationapi" /><meta property="article:tag" content="foreground service" />

    <meta property="og:image" content="https://yazilim.aykutasil.com/img/istanbul_marti.jpg"/>

    <meta name="generator" content="Hugo 0.61.0" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://yazilim.aykutasil.com/built/screen.css" /> 
    <link rel="stylesheet" type="text/css" href="https://yazilim.aykutasil.com/css/casper-two.css" /> 
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    

     

</head>


<body class="post-template">
  <div class="site-wrapper"> 

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">
        <a class="site-nav-logo" href="#"><img src="https://yazilim.aykutasil.com/img/aykutasil.jpg" alt="My Book" /></a>

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="https://yazilim.aykutasil.com/">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="https://yazilim.aykutasil.com/about/">About me</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="https://yazilim.aykutasil.com/tags/android/">Android</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="https://yazilim.aykutasil.com/categories/">Categories</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    <a class="social-link social-link-fb" href="https://www.facebook.com/aykuttasil" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg></a>

                    <a class="social-link social-link-tw" href="https://twitter.com/aykuttasil" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a>

                    <a class="social-link" href="https://github.com/aykuttasil" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    <a class="social-link" href="https://www.linkedin.com/in/aykuttasil" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 50 512 512"><path d="M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683 C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615 c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915 s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z" /></svg></a>

                    <a class="social-link" href="https://medium.com/@aykuttasil" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 195 195"><path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z"/></svg></a>
        </div>  
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      <article class="post-full post"> 
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2017-01-11">11 January 2017</time>
                <span class="date-divider">/</span> <a href="https://yazilim.aykutasil.com/tags/software/">#software</a>&nbsp;<a href="https://yazilim.aykutasil.com/tags/android/">#android</a>&nbsp;
        </section>
        <h1 class="post-full-title">Foreground Service ile FusedLocationApi Kullanımı</h1>
    </header>
    
    <figure class="post-full-image" style="background-image: url(https://yazilim.aykutasil.com/defimg/6.jpg)">
    </figure>

    <section class="post-full-content">
        <div class="kg-card-markdown">
        <p>Android service yapısı, Android’in temel bileşenlerinden olup genel kullanım amacı yan iş parçacığı oluşturmaktır. Uzun süren işlemler (download vb.) için olmazsa olmaz bileşendir. Android in service bileşenini kendi ihtiyaçlarınız doğrultusunda özelleştirebilir ve uygulamanızı modern bir yapıya kavuşturabilirsiniz.</p>
<p>Burada yapacağımız örnekte kısaca şu aşamaları görücez;</p>
<ul>
<li>Service i foreground olarak başlatmak</li>
<li>Ongoing(devamlı gözüken) notification oluşturmak</li>
<li>GoogleApiClient a bağlanmak</li>
<li>Location bilgisini notification da göstermek</li>
</ul>
<p>İlk olarak Service imiz kodlarını yazalım. Gerekli açıklamalar kodların arasında mevcuttur.</p>
<p><strong>ForegroundService.java</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ForegroundService</span> <span style="color:#66d9ef">extends</span> Service <span style="color:#66d9ef">implements</span> GoogleApiClient<span style="color:#f92672">.</span><span style="color:#a6e22e">ConnectionCallbacks</span><span style="color:#f92672">,</span> GoogleApiClient<span style="color:#f92672">.</span><span style="color:#a6e22e">OnConnectionFailedListener</span> <span style="color:#f92672">{</span>

 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> LOCATION_NOTIF_ID <span style="color:#f92672">=</span> 859<span style="color:#f92672">;</span>
 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> LocationPeriod <span style="color:#f92672">=</span> 1000 <span style="color:#f92672">*</span> 30 <span style="color:#f92672">;</span>
 
 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Notification notification<span style="color:#f92672">;</span>
 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> GoogleApiClient _googleApiClient <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Context mContext<span style="color:#f92672">;</span>
 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> NotificationCompat<span style="color:#f92672">.</span><span style="color:#a6e22e">Builder</span> mBuilder<span style="color:#f92672">;</span>



 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onCreate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 mContext <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span>
 mBuilder <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> NotificationCompat<span style="color:#f92672">.</span><span style="color:#a6e22e">Builder</span><span style="color:#f92672">(</span>mContext<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>

 <span style="color:#a6e22e">@Nullable</span>
 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> IBinder <span style="color:#a6e22e">onBind</span><span style="color:#f92672">(</span>Intent intent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>

 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">onStartCommand</span><span style="color:#f92672">(</span>Intent intent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> flags<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> startId<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>


 <span style="color:#75715e">// Eğer Service ilk defa çalıştırılıyor ise buildGoogleApiClient fonksiyonu ile GoogleApiClient build ediliyor
</span><span style="color:#75715e"></span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>_googleApiClient <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 buildGoogleApiClient<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>
 <span style="color:#75715e">// GoogleApiClient a bağlanılıyor
</span><span style="color:#75715e"></span> _googleApiClient<span style="color:#f92672">.</span><span style="color:#a6e22e">connect</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

 <span style="color:#75715e">// Notificaiton gösteriyoruz
</span><span style="color:#75715e"></span> LocationNotification<span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Konum Bilgisi Yok&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

 <span style="color:#75715e">// Service imizi foreground olarak başlatıyoruz
</span><span style="color:#75715e"></span> <span style="color:#75715e">// Foreground service bizden bir notification parametresi ister. Bunun sebebi sürekli ayakta olduğunu kullanıcıya bildirmektir.
</span><span style="color:#75715e"></span> startForeground<span style="color:#f92672">(</span>LOCATION_NOTIF_ID<span style="color:#f92672">,</span> notification<span style="color:#f92672">)</span><span style="color:#f92672">;</span>

 <span style="color:#75715e">// Herhangi bir sebeple service imizi durması halinde kendiliğinden tekrar başlaması için START_STICKY dönüyoruz.
</span><span style="color:#75715e"></span> <span style="color:#66d9ef">return</span> START_STICKY<span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>


 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">synchronized</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">buildGoogleApiClient</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>_googleApiClient <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 _googleApiClient <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> GoogleApiClient<span style="color:#f92672">.</span><span style="color:#a6e22e">Builder</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">addConnectionCallbacks</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">addOnConnectionFailedListener</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">addApi</span><span style="color:#f92672">(</span>LocationServices<span style="color:#f92672">.</span><span style="color:#a6e22e">API</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span>


 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onConnected</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@Nullable</span> Bundle bundle<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#75715e">// GoogleApiClient a bağlanıldığında Location isteğinde bulunuyoruz.
</span><span style="color:#75715e"></span> LocationRequest<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>


 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onConnectionSuspended</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

 <span style="color:#f92672">}</span>


 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onConnectionFailed</span><span style="color:#f92672">(</span>ConnectionResult result<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#75715e">// tekrar bağlanmayı deniyoruz
</span><span style="color:#75715e"></span> _googleApiClient<span style="color:#f92672">.</span><span style="color:#a6e22e">connect</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>


 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">LocationRequest</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>


 <span style="color:#75715e">// PRIORITY_BALANCED_POWER_ACCURACY -&gt; hassas konum bilgisine ihtiyacımız yok ise (Network, Cell Tower)
</span><span style="color:#75715e"></span> <span style="color:#75715e">// PRIORITY_HIGH_ACCURACY -&gt; hassas konum bilgisine ihtiyacımız var ise (GPS)
</span><span style="color:#75715e"></span>
 <span style="color:#66d9ef">final</span> LocationRequest locationRequest <span style="color:#f92672">=</span> LocationRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">create</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setPriority</span><span style="color:#f92672">(</span>LocationRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">PRIORITY_HIGH_ACCURACY</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setInterval</span><span style="color:#f92672">(</span><span style="color:#f92672">(</span>LocationPeriod <span style="color:#f92672">*</span> 1000<span style="color:#f92672">)</span><span style="color:#f92672">)</span> 
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setFastestInterval</span><span style="color:#f92672">(</span>LOCATION_FASTEST_INTERVAL<span style="color:#f92672">)</span><span style="color:#f92672">;</span>


 <span style="color:#75715e">//final LocationRequest locationRequest1 = LocationRequest.create()
</span><span style="color:#75715e"></span> <span style="color:#75715e">// .setPriority(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY)
</span><span style="color:#75715e"></span> <span style="color:#75715e">// .setInterval((LocationPeriod * 1000))
</span><span style="color:#75715e"></span> <span style="color:#75715e">// .setFastestInterval(LOCATION_FASTEST_INTERVAL);
</span><span style="color:#75715e"></span>
 <span style="color:#75715e">// İhtiyaçlarımız doğrultusunda yapılandırdığımız LocationRequest in gerekliliklerini kontrol ederek, cihazın davranışının otomatik olarak ayarlanması için
</span><span style="color:#75715e"></span> <span style="color:#75715e">// gerekli Dialog penceresinin çıkmasını sağlar ve Kullanıcının onayını ister
</span><span style="color:#75715e"></span>
 <span style="color:#75715e">// Örnek olarak eğer PRIORITY_HIGH_ACCURACY olrarak belirlenmişse ve cihazın GPS i kapalı ise bir Dialog çıkartarak GPS i açmanızı ister
</span><span style="color:#75715e"></span> LocationSettingsRequest locationSettingsRequest <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LocationSettingsRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">Builder</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">addLocationRequest</span><span style="color:#f92672">(</span>locationRequest<span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setAlwaysShow</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

 PendingResult<span style="color:#f92672">&lt;</span>LocationSettingsResult<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span>
 LocationServices<span style="color:#f92672">.</span><span style="color:#a6e22e">SettingsApi</span><span style="color:#f92672">.</span><span style="color:#a6e22e">checkLocationSettings</span><span style="color:#f92672">(</span>_googleApiClient<span style="color:#f92672">,</span> locationSettingsRequest<span style="color:#f92672">)</span><span style="color:#f92672">;</span>

 <span style="color:#75715e">// Gösterilen Dilag penceresi ile Kullanıcının etkileşimi sonucunun yakalar
</span><span style="color:#75715e"></span> result<span style="color:#f92672">.</span><span style="color:#a6e22e">setResultCallback</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> ResultCallback<span style="color:#f92672">&lt;</span>LocationSettingsResult<span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#a6e22e">@DebugLog</span>
 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onResult</span><span style="color:#f92672">(</span>LocationSettingsResult locationSettingsResult<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

 <span style="color:#75715e">// locationSettingsStates ile cihazın durumunu kontrol ederek akışımızı yönlendirebiliriz
</span><span style="color:#75715e"></span> LocationSettingsStates locationSettingsStates <span style="color:#f92672">=</span> locationSettingsResult<span style="color:#f92672">.</span><span style="color:#a6e22e">getLocationSettingsStates</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 
 <span style="color:#75715e">// Konum dinlenmeye başlanır
</span><span style="color:#75715e"></span> <span style="color:#75715e">// mLocationListener ile konum değişikliği yakalanır.
</span><span style="color:#75715e"></span> FusedLocationApi<span style="color:#f92672">.</span><span style="color:#a6e22e">requestLocationUpdates</span><span style="color:#f92672">(</span>_googleApiClient<span style="color:#f92672">,</span> locationRequest<span style="color:#f92672">,</span> mLocationListener<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 
 <span style="color:#75715e">//FusedLocationApi.requestLocationUpdates(_googleApiClient, locationRequest1, mLocationListener);
</span><span style="color:#75715e"></span> 
 <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>


 <span style="color:#f92672">}</span>


 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> LocationListener mLocationListener <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LocationListener<span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onLocationChanged</span><span style="color:#f92672">(</span>Location location<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>


 <span style="color:#75715e">// Location değişikliğini burada yakalayabiliriz.
</span><span style="color:#75715e"></span> <span style="color:#75715e">// Belirlemiş olduğumuz periyodik zaman aralığında Location değişikliği kontrol edilecektir.
</span><span style="color:#75715e"></span> <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span><span style="color:#f92672">;</span>


 
 <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ForegroundService</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#f92672">}</span>

 <span style="color:#75715e">// Bu fonksiyon yardımı ile başka bir sınıftan konum bilgisine erişebiliriz.
</span><span style="color:#75715e"></span> <span style="color:#75715e">// static olarak tanımlanmış olması bize kolaylık sağlıcaktır.
</span><span style="color:#75715e"></span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Location <span style="color:#a6e22e">getLastLocation</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>_googleApiClient <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">return</span> FusedLocationApi<span style="color:#f92672">.</span><span style="color:#a6e22e">getLastLocation</span><span style="color:#f92672">(</span>_googleApiClient<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span>


 <span style="color:#75715e">// GoogleApiClient nesnemize erişmek istersek bu kod bloğunu kullanabiliriz.
</span><span style="color:#75715e"></span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> GoogleApiClient <span style="color:#a6e22e">getGoogleApiClient</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">return</span> _googleApiClient<span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>

 
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">removeLocationUpdates</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>_googleApiClient <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 FusedLocationApi<span style="color:#f92672">.</span><span style="color:#a6e22e">removeLocationUpdates</span><span style="color:#f92672">(</span>_googleApiClient<span style="color:#f92672">,</span> mLocationListener<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span>

 <span style="color:#a6e22e">@DebugLog</span>
 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">LocationNotification</span><span style="color:#f92672">(</span>Location location<span style="color:#f92672">,</span> String subText<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 NotificationManager notificationManager <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>NotificationManager<span style="color:#f92672">)</span> mContext<span style="color:#f92672">.</span><span style="color:#a6e22e">getSystemService</span><span style="color:#f92672">(</span>Context<span style="color:#f92672">.</span><span style="color:#a6e22e">NOTIFICATION_SERVICE</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#75715e">//
</span><span style="color:#75715e"></span>
 mBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">setSmallIcon</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">drawable</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ic_stat_device_gps_fixed</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 mBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">setTicker</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Konum&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#75715e">//.setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION))
</span><span style="color:#75715e"></span> mBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">setSubText</span><span style="color:#f92672">(</span>subText<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 mBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">setOnlyAlertOnce</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 mBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">setPriority</span><span style="color:#f92672">(</span>Notification<span style="color:#f92672">.</span><span style="color:#a6e22e">PRIORITY_HIGH</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>


 <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>location <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 mBuilder
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTitle</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Sapma: &#34;</span> <span style="color:#f92672">+</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">valueOf</span><span style="color:#f92672">(</span>location<span style="color:#f92672">.</span><span style="color:#a6e22e">getAccuracy</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setContentText</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Lat: &#34;</span> <span style="color:#f92672">+</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">valueOf</span><span style="color:#f92672">(</span>location<span style="color:#f92672">.</span><span style="color:#a6e22e">getLatitude</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; , &#34;</span> <span style="color:#f92672">+</span>
 <span style="color:#e6db74">&#34;Long: &#34;</span> <span style="color:#f92672">+</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">valueOf</span><span style="color:#f92672">(</span>location<span style="color:#f92672">.</span><span style="color:#a6e22e">getLongitude</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setWhen</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setShowWhen</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setUsesChronometer</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setContentIntent</span><span style="color:#f92672">(</span>pendingIntent<span style="color:#f92672">)</span><span style="color:#f92672">;</span>


 <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
 mBuilder
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTitle</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)</span>
 <span style="color:#f92672">.</span><span style="color:#a6e22e">setContentText</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>


 notification <span style="color:#f92672">=</span> mBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 notificationManager<span style="color:#f92672">.</span><span style="color:#a6e22e">notify</span><span style="color:#f92672">(</span>LOCATION_NOTIF_ID<span style="color:#f92672">,</span> notification<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>

 <span style="color:#a6e22e">@DebugLog</span>
 <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onDestroy</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>_googleApiClient <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>_googleApiClient<span style="color:#f92672">.</span><span style="color:#a6e22e">isConnected</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
 FusedLocationApi<span style="color:#f92672">.</span><span style="color:#a6e22e">removeLocationUpdates</span><span style="color:#f92672">(</span>_googleApiClient<span style="color:#f92672">,</span> mLocationListener<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 _googleApiClient<span style="color:#f92672">.</span><span style="color:#a6e22e">disconnect</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span>
 PeriodicHandler<span style="color:#f92672">.</span><span style="color:#a6e22e">removeMessages</span><span style="color:#f92672">(</span>1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 stopForeground<span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onDestroy</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>


<span style="color:#f92672">}</span>
</code></pre></div><p>Tanımlamış olduğumuz servisi başlatmak için istediğimiz yerden ( Activity , Fragment vb.) aşağıdaki kod bloğunu çalıştırmamız yeterli olucaktır.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Intent serviceIntent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Intent<span style="color:#f92672">(</span>context<span style="color:#f92672">,</span> ForegroundService<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
startService<span style="color:#f92672">(</span>serviceIntent<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
</code></pre></div>    
        </div>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://yazilim.aykutasil.com/img/aykutasil.jpg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="https://yazilim.aykutasil.com/">Aykut Asil</a></h4>
                <p>Software Developer</p>
        </section>
      </section>
    </footer>
</article>
    
    
    

<div id="disqus_thread"></div>
<script>




var disqus_config = function () {
this.page.url = "https:\/\/yazilim.aykutasil.com\/post\/foreground-service-ile-fusedlocationapi-kullan%C4%B1m%C4%B1\/";  
this.page.identifier = "https:\/\/yazilim.aykutasil.com\/post\/foreground-service-ile-fusedlocationapi-kullan%C4%B1m%C4%B1\/"; 
};

(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://yazilimaykutasil.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      
<article class="read-next-card" 
            style="background-image: url(https://yazilim.aykutasil.com/img/istanbul_marti.jpg);" >
    <header class="read-next-card-header">
        <small class="read-next-card-header-sitetitle">&mdash; My Book &mdash;</small>
        
        <h3 class="read-next-card-header-title"><a href="https://yazilim.aykutasil.com/tags/software/">#software</a></h3>
    </header>
    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
    </div>

    <div class="read-next-card-content">
      
        <ul>
          <li><a href="https://yazilim.aykutasil.com/post/ssh-s%C3%BCrekli-parola-istemesi-sorunu/">SSH Sürekli Parola İstemesi Sorunu</a></li>            
        
          <li><a href="https://yazilim.aykutasil.com/post/android-key-hashes-sha1/">Android Key Hashes &amp; SHA1</a></li>            
        
          <li><a href="https://yazilim.aykutasil.com/post/kotlin-jvmoverloads/">Kotlin @JvmOverloads</a></li>            
        
          <li><a href="https://yazilim.aykutasil.com/post/vs-code-express-typescript-intellisense/">VS Code &amp; Express &amp; TypeScript &amp; IntelliSense</a></li>            
        </ul>
    </div>
    <footer class="read-next-card-footer">
      
        <a href="https://yazilim.aykutasil.com/tags/software/">See all related posts →</a>
    </footer>
</article>


      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://yazilim.aykutasil.com/post/sql-management-studio-custom-generate-scripts/">
      <div class="post-card-image" style="background-image: url(https://yazilim.aykutasil.com/defimg/5.jpg)"></div>
    </a>    
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://yazilim.aykutasil.com/post/sql-management-studio-custom-generate-scripts/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #software 
              #sql 
              #mssql 
              #custom script  </span>
              
              <h2 class="post-card-title">SQL Management Studio Custom Generate Scripts</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>SQL Management Studio kullanarak MSSQL e erişim yapmanız size birçok fayda sağlayacaktır. Tabi dezavantajları da yok değil !.
Senaryomuz şu şekilde; Test veritabanında çalışarak kendinizi production veritabanında izole ettiniz ve güvenlik konusunda bir adım öne geçtiniz. Test veritabanı ile işlemleriniz bittikten sonra artık sıra geldi oluşturmuş olduğumuz tüm yapıları taşımaya ! Bu kısım biraz sıkıcı olsa da SQL Management Studio nun buna getirmiş olduğu kolaylıklar var.
Oluşturmuş olduğumuz tabloların sadece şemasını yani içiindeki veriler olmaksızın taşımak istersek, ( ki bu durum default olarak yapılandıırlmış durumdur ) işimiz oldukça kolay. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://yazilim.aykutasil.com/img/aykutasil.jpg" alt="Author" />
          <span class="post-card-author"><a href="https://yazilim.aykutasil.com/">Aykut Asil</a></span>
      </footer>
    </div>
</article>
      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://yazilim.aykutasil.com/post/retrofit-multipart-file-upload/">
      <div class="post-card-image" style="background-image: url(https://yazilim.aykutasil.com/defimg/3.jpg)"></div>
    </a>    
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://yazilim.aykutasil.com/post/retrofit-multipart-file-upload/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #software 
              #retrofit 
              #multipart 
              #file upload  </span>
              
              <h2 class="post-card-title">Retrofit Multipart File Upload</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>Retrofit Multipart File Upload @DebugLog public BelgeResponse BelgeSync(BelgeRequest request, String apiVersion, String appVersion) { try { Map&lt;String, RequestBody&gt; map = new HashMap&lt;&gt;(); String belgeDirPath = SuperHelper.getInternalIztopBelgeDir(mContext, request.getGonderiNo()); File belgeDir = new File(belgeDirPath); boolean isDir = belgeDir.isDirectory(); if (isDir) { File[] files = belgeDir.listFiles(); for (File file : files) { RequestBody requestBody = RequestBody.create(MediaType.parse(&#34;image/jpg&#34;), file); map.put(&#34;file\&#34;; filename=\&#34;&#34; + file.getName(), requestBody); } } //RequestBody requestBodyGonderiNo = RequestBody.create(MediaType.parse(&#34;text/plain&#34;), request.getGonderiNo());  //RequestBody requestBodyMusId = RequestBody. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://yazilim.aykutasil.com/img/aykutasil.jpg" alt="Author" />
          <span class="post-card-author"><a href="https://yazilim.aykutasil.com/">Aykut Asil</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://yazilim.aykutasil.com/">
      <img src="https://yazilim.aykutasil.com/img/aykutasil.jpg" alt="" />
      <span></span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">Foreground Service ile FusedLocationApi Kullanımı</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>
    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=Foreground%20Service%20ile%20FusedLocationApi%20Kullan%c4%b1m%c4%b1&amp;url=https%3a%2f%2fyazilim.aykutasil.com%2fpost%2fforeground-service-ile-fusedlocationapi-kullan%25C4%25B1m%25C4%25B1%2f"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fyazilim.aykutasil.com%2fpost%2fforeground-service-ile-fusedlocationapi-kullan%25C4%25B1m%25C4%25B1%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="https://yazilim.aykutasil.com/">AA</a> © 2018 <br>
      <span style="font-size: 0.8em; color: #555;">Hugo port of <a href="https://github.com/TryGhost/Casper">Casper 2.1.7</a> by <a href="https://www.telematika.org">EM</a></span>
    </section>
    <nav class="site-footer-nav">
        <a href="https://yazilim.aykutasil.com/">Latest Posts</a>
        <a href="https://www.facebook.com/aykuttasil" target="_blank" rel="noopener">Facebook</a>
        <a href="https://twitter.com/aykuttasil" target="_blank" rel="noopener">Twitter</a>
        <a href="https://github.com/aykuttasil" target="_blank" rel="noopener">Github</a>
        <a href="https://www.linkedin.com/in/aykuttasil" target="_blank" rel="noopener">LinkedIn</a>
        <a href="https://medium.com/@aykuttasil" target="_blank" rel="noopener">Medium</a>
    </nav>  
  </div>
</footer>

</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://yazilim.aykutasil.com/js/jquery.fitvids.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','UA-42457939-6'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>


    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
